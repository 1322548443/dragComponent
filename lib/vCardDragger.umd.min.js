(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vCardDragger"]=e():t["vCardDragger"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({6635:function(t,e,n){"use strict";var o=n("c380"),i=n.n(o);i.a},c380:function(t,e,n){},f6fd:function(t,e){(function(t){var e="currentScript",n=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(o){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(o.stack)||[!1])[1];for(t in n)if(n[t].src==e||"interactive"==n[t].readyState)return n[t];return null}}})})(document)},fb15:function(t,e,n){"use strict";var o;(n.r(e),"undefined"!==typeof window)&&(n("f6fd"),(o=window.document.currentScript)&&(o=o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=o[1]));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.data?n("div",{style:{position:"relative",height:t.computeTop(t.data.length)+t.cardOutsideHeight+"px",width:t.cardOutsideWidth*t.colNum+"px"}},[t._l(t.data,(function(e){return n("div",{key:e.id,staticClass:"cardBorderBox",style:{top:t.computeTop(e.positionNum)+"px",left:t.computeLeft(e.positionNum)+"px"},attrs:{id:e.id}},[!1===e.selectState?n("div",{staticClass:"cardInsideBox",style:{width:t.cardInsideWidth+"px",height:t.cardInsideHeight+"px"}},[n("div",{staticClass:"topWrapBox",on:{mousedown:function(n){return t.touchStart(n,e.id)}}},[t._t("header",[n("div",{staticClass:"topMenuBox"},[e.name?n("div",{staticClass:"menuTitle"},[t._v(t._s(e.name))]):n("div",{staticClass:"menuTitle"},[t._v(" 默认标题 ")])])],{item:e})],2),e.componentData?n(e.componentData,{tag:"component",attrs:{animationState:t.animationState}}):t._t("content",[n("div",{staticClass:"emptyContent"},[t._v("\n          卡片暂无内容\n        ")])],{item:e})],2):t._e()])})),null!==t.selectMenuData?n("div",{staticClass:"cardBorderBox moveBox"},[n("div",{staticClass:"cardInsideBox",style:{width:t.cardInsideWidth+"px",height:t.cardInsideHeight+"px"}},[n("div",{staticClass:"topWrapBox"},[t._t("header",[n("div",{staticClass:"topMenuBox"},[t.selectMenuData.name?n("div",{staticClass:"menuTitle"},[t._v(t._s(t.selectMenuData.name))]):n("div",{staticClass:"menuTitle"},[t._v(" 默认标题 ")])])],{item:t.selectMenuData})],2),t.selectMenuData.componentData?n(t.selectMenuData.componentData,{tag:"component",attrs:{animationState:t.animationState}}):t._t("content",[n("div",{staticClass:"emptyContent"},[t._v("\n          卡片暂无内容\n        ")])],{item:t.selectMenuData})],2)]):t._e()],2):t._e()},s=[],r={name:"cardDragger",props:{data:{type:Array},colNum:{type:Number,default:2},headerHide:{type:Boolean,default:!1},cardOutsideWidth:{type:Number,default:590},cardOutsideHeight:{type:Number,default:380},cardInsideWidth:{type:Number,default:560},cardInsideHeight:{type:Number,default:320},detectDistance:{type:Number,default:50}},data:()=>({animationState:!0,selectDom:"",selectMenuData:null,mousedownTimer:null}),methods:{touchStart(t,e){if(this.mousedownTimer)return!1;this.$emit("startDrag",t,e);let n=this,o=null,i=0===document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,s=i,r=0,a=0,c={left:0,top:0,originNum:-1},u={x:0,y:0};function d(t,e){return function(){o||(o=setTimeout(()=>{t.apply(this,arguments),o=null},e))}}function l(t){r=c.top+(t.screenY-u.y),a=c.left+(t.screenX-u.x),document.querySelector(".moveBox").style.left=a+"px",document.querySelector(".moveBox").style.top=r+(s-i)+"px",d.call(this,m,100).call(this,r+(s-i),a)}function m(t,e){for(let o of n.data)o.id!=n.selectMenuData.id&&p(o,n.selectMenuData,t,e)}function p(t,e,o,i){let s=n.computeTop(t.positionNum),r=n.computeLeft(t.positionNum);o>s-n.detectDistance&&o<s+n.detectDistance?(i>r&&i<r+n.cardOutsideWidth/2||i+n.cardOutsideWidth>r+n.cardOutsideWidth/2&&i+n.cardOutsideWidth<r+n.cardOutsideWidth)&&f(t,e):i>=r-n.detectDistance&&i<=r+n.detectDistance&&(o+n.cardOutsideHeight>s+n.cardOutsideHeight/2&&o+n.cardOutsideHeight<s+n.cardOutsideHeight||o>s&&o<s+n.cardOutsideHeight/2)&&f(t,e)}function f(t,e){let o=e.positionNum,i=t.positionNum;if(n.$emit("swicthPosition",o,i,e),i>o){let t=[];for(let e=o+1;e<=i;e++){let o=n.data.find(t=>{return t.positionNum===e});t.push(o)}for(let e of t)n.$set(e,"positionNum",e.positionNum-1);n.$set(e,"positionNum",i)}if(i<o){let t=[];for(let e=o-1;e>=i;e--){let o=n.data.find(t=>{return t.positionNum===e});t.push(o)}for(let e of t)n.$set(e,"positionNum",e.positionNum+1);n.$set(e,"positionNum",i)}}function h(){document.querySelector(".moveBox").style.transition="all 0.3s",document.querySelector(".moveBox").style.top=n.computeTop(n.selectMenuData.positionNum)+"px",document.querySelector(".moveBox").style.left=n.computeLeft(n.selectMenuData.positionNum)+"px",n.$emit("finishDrag"),n.$nextTick(()=>{n.mousedownTimer=setTimeout(()=>{n.$set(n.selectMenuData,"selectState",!1),n.selectMenuData=null,clearTimeout(n.mousedownTimer),n.mousedownTimer=null},300)}),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",h),document.removeEventListener("scroll",y)}function y(t){s=0===document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,document.querySelector(".moveBox").style.top=r+s-i+"px"}u.x=t.screenX,u.y=t.screenY,this.selectDom=document.getElementById(e),this.selectMenuData=this.data.find(t=>{return t.id===e}),this.$set(this.selectMenuData,"selectState",!0),c.left=parseInt(this.selectDom.style.left.slice(0,this.selectDom.style.left.length-2)),c.top=parseInt(this.selectDom.style.top.slice(0,this.selectDom.style.top.length-2)),this.$nextTick(()=>{document.querySelector(".moveBox").style.left=c.left+"px",document.querySelector(".moveBox").style.top=c.top+"px"}),document.addEventListener("mousemove",l),document.addEventListener("mouseup",h),document.addEventListener("scroll",y)},computeLeft(t){return(t-1)%this.colNum*this.cardOutsideWidth},computeTop(t){return(Math.ceil(t/this.colNum)-1)*this.cardOutsideHeight}},mounted(){this.$nextTick(()=>{this.animationState=!1})}},a=r;n("6635");function c(t,e,n,o,i,s,r,a){var c,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),o&&(u.functional=!0),s&&(u._scopeId="data-v-"+s),r?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var d=u.render;u.render=function(t,e){return c.call(e),d(t,e)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,c):[c]}return{exports:t,options:u}}var u=c(a,i,s,!1,null,"2cea4d46",null),d=u.exports;d.install=function(t){t.component(d.name,d)};var l=d;const m=[l],p=function(t){p.installed||m.map(e=>t.component(e.name,e))};"undefined"!==typeof window&&window.Vue&&p(window.Vue);var f={install:p,cardDragger:l};e["default"]=f}})}));
//# sourceMappingURL=vCardDragger.umd.min.js.map